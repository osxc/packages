---
- name: Tap the repositories
  homebrew_tap: "tap={{ item }}"
  with_items: brew_taps
  when: brew_taps is defined

- name: Install the homebrew packages
  homebrew: name={{ item }}
  with_items: brew_packages
  when: brew_packages is defined

- name: Install a single homebrew package
  homebrew: name={{ brew_package }}
  when: brew_package is defined and brew_opts is not defined

- name: Install a single homebrew package with brew options
  homebrew: name={{ brew_package }} install_options={{ brew_opts }}
  when: brew_package is defined and brew_opts is defined

- name: Install the cask packages
  homebrew_cask: name={{ item }}
  with_items: cask_packages
  when: cask_packages is defined
