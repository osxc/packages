---
- name: Tap the repositories
  homebrew_tap: "tap={{ item }}"
  with_items: brew_taps

- name: Install the homebrew packages
  homebrew: name={{ item }}
  with_items: brew_packages

- name: Install the cask packages
  homebrew_cask: name={{ item }}
  with_items: cask_packages

#- name: Install a single homebrew package with brew options
#  homebrew: name={{ brew_package }} install_options={{ brew_opts }}
#  when: brew_package is defined and brew_opts is defined

- name: Install homebrew package(s) with brew options
  homebrew: name={{ item.pkgs }} install_options={{ item.opts }}
  with_items: brew_pkgs_with_opts
  when: brew_pkgs_with_opts is defined
#  - { pkgs: "curl" , opts: "with-idn,with-openssl"}